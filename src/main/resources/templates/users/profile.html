<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head :: head}"></head>
<body>
<div th:replace="~{fragments/navbar :: navbar}"></div>

<main class="container">
    <hgroup>
        <h1>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>
    </hgroup>

    <div class="grid" style="text-align: center;">
        <article>
            <header>–í—Å–µ–≥–æ –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–Ω–∏–π</header>
            <h2 th:text="${totalPredictions}">0</h2>
        </article>
        <article>
            <header>–ü–æ–±–µ–¥</header>
            <h2 th:text="${wonPredictions}" style="color: green;">0</h2>
        </article>
        <article>
            <header>–ë–∞–ª–∞–Ω—Å</header>
            <h2 th:text="${user.balance} + ' üí∞'">0</h2>
        </article>
        <article>
            <header>–†–æ–ª—å</header>
            <h2 th:text="${user.role}">USER</h2>
        </article>
    </div>

    <hr>

    <h3>–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–Ω–∏–π</h3>
    
    <div th:if="${history.empty}">
        <p>–í—ã –µ—â–µ –Ω–µ —Å–¥–µ–ª–∞–ª–∏ –Ω–∏ –æ–¥–Ω–æ–≥–æ –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–Ω–∏—è. <a href="/events/all">–ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–æ–±—ã—Ç–∏—è–º?</a></p>
    </div>

    <table role="grid" th:if="${!history.empty}" class="centered-table">
        <thead>
        <tr>
            <th>–î–∞—Ç–∞</th>
            <th>–°–æ–±—ã—Ç–∏–µ</th>
            <th>–í–∞—à –≤—ã–±–æ—Ä</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="prediction : ${history}">
            <td th:text="${#dates.format(prediction.createdAt, 'dd-MM-yyyy HH:mm')}"></td>
            <td>
                <a th:href="@{/events/details/{id}(id=${prediction.event.id})}" 
                   th:text="${prediction.event.title}">–°–æ–±—ã—Ç–∏–µ</a>
            </td>
            <td th:text="${prediction.chosenOption.text}">–í—ã–±–æ—Ä</td>
            <td>
                <span th:if="${prediction.status.name() == 'PLACED'}" data-tooltip="–û–∂–∏–¥–∞–Ω–∏–µ">–í –∏–≥—Ä–µ</span>
                <span th:if="${prediction.status.name() == 'WON'}" style="color: green; font-weight: bold;">–ü–æ–±–µ–¥–∞</span>
                <span th:if="${prediction.status.name() == 'LOST'}" style="color: red;">–ü—Ä–æ–∏–≥—Ä—ã—à</span>
            </td>
        </tr>
        </tbody>
    </table>

</main>
<footer th:replace="~{fragments/footer :: footer}"></footer>
</body>
</html>