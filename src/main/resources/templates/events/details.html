<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head :: head}"></head>
<body>
<div th:replace="~{fragments/navbar :: navbar}"></div>
<main class="container">
    <article>
        <h1 th:text="${event.title}"></h1>
        <p th:text="${event.description}"></p>
        <p><strong>Статус:</strong> <span th:text="${event.status}"></span></p>

        <div th:if="${successMessage}" style="background-color: #d4edda; color: #155724; padding: 10px; margin-bottom: 10px; border-radius: 4px;">
            <span th:text="${successMessage}"></span>
        </div>
        <div th:if="${errorMessage}" style="background-color: #f8d7da; color: #721c24; padding: 10px; margin-bottom: 10px; border-radius: 4px;">
            <span th:text="${errorMessage}"></span>
        </div>


        <form method="post" th:action="@{/predictions/make}">
            
            <input type="hidden" name="eventId" th:value="${event.id}">
            
            <h3>Сделайте ваш выбор:</h3>

            <div th:each="opt : ${event.optionsWithStats}" style="margin-bottom: 5px;">
                <label>
                    <input type="radio" name="chosenOptionId" th:value="${opt.optionId}" required>
                    <span th:text="${opt.text}">Текст варианта</span>
                </label>
            </div>
            <button type="submit" style="margin-top: 15px;">Подтвердить выбор</button>
        </form>

        <hr>

        <form th:action="@{/events/delete/{id} (id=${event.id})}" th:method="GET"
              onsubmit="return confirm('Вы уверены, что хотите удалить это событие?')">
            <button type="submit" class="secondary outline">Удалить событие</button>
        </form>

        <div style="margin-top: 10px;">
            <a href="/events/all" role="button" class="secondary">Назад к списку</a>
        </div>
    </article>
</main>
<footer th:replace="~{fragments/footer :: footer}"></footer>
</body>
</html>